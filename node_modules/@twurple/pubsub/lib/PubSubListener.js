"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PubSubListener = void 0;
const tslib_1 = require("tslib");
const shared_utils_1 = require("@d-fischer/shared-utils");
const common_1 = require("@twurple/common");
/**
 * A listener attached to a single PubSub topic.
 */
let PubSubListener = class PubSubListener {
    /** @private */
    constructor(_topic, _userId, _callback, client) {
        this._topic = _topic;
        this._userId = _userId;
        this._callback = _callback;
        this._client = client;
    }
    /**
     * The type of the topic.
     */
    get topic() {
        return this._topic;
    }
    /**
     * The user ID part of the topic.
     */
    get userId() {
        return this._userId;
    }
    /**
     * Removes the topic from the PubSub client.
     */
    async remove() {
        await this._client.removeListener(this);
    }
    /** @private */
    call(message) {
        this._callback(message);
    }
};
tslib_1.__decorate([
    shared_utils_1.Enumerable(false)
], PubSubListener.prototype, "_client", void 0);
PubSubListener = tslib_1.__decorate([
    common_1.rtfm('pubsub', 'PubSubListener', 'userId')
], PubSubListener);
exports.PubSubListener = PubSubListener;
